

<!DOCTYPE html>
<html lang="" data-default-color-scheme=auto>

<meta name="google-site-verification" content="ZNN3oejaVPan2TBRaPKWT4_wyI6Q7MTk8LMpKv-4VYg" />


<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Chivier Humber">
  <meta name="keywords" content="">
  
    <meta name="description" content="OS A piece of software that manages a computer, making computer’s hardwareresources accessible to software through a consistent set of interfaces.  并发(Concurrence) 共享(Sharing)  虚拟(Virtual)  异步(Asyn">
<meta property="og:type" content="article">
<meta property="og:title" content="Operating System Concept - 1">
<meta property="og:url" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/index.html">
<meta property="og:site_name" content="Chivier&#39;s Blog">
<meta property="og:description" content="OS A piece of software that manages a computer, making computer’s hardwareresources accessible to software through a consistent set of interfaces.  并发(Concurrence) 共享(Sharing)  虚拟(Virtual)  异步(Asyn">
<meta property="og:locale">
<meta property="og:image" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/DOS.png">
<meta property="og:image" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/Unix.png">
<meta property="og:image" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/Queueing-diagram.png">
<meta property="og:image" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/process.png">
<meta property="og:image" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/PCB.png">
<meta property="og:image" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/PCB_Switch.png">
<meta property="og:image" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/Queueing-diagram.png">
<meta property="article:published_time" content="2019-04-10T06:56:09.000Z">
<meta property="article:modified_time" content="2022-07-03T04:42:12.112Z">
<meta property="article:author" content="Chivier Humber">
<meta property="article:tag" content="System">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/DOS.png">
  
  
  
  <title>Operating System Concept - 1 - Chivier&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"chivier.github.io","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Chivier</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Operating System Concept - 1"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2019-04-10 14:56" pubdate>
          April 10, 2019 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.5k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          46 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Operating System Concept - 1</h1>
            
            
              <div class="markdown-body">
                
                 <span id="more"></span>

<h1 id="OS"><a href="#OS" class="headerlink" title="OS"></a>OS</h1><blockquote>
<p>A piece of software that manages a computer, making computer’s hardware<br>resources accessible to software through a consistent set of interfaces.</p>
</blockquote>
<p>并发(Concurrence)</p>
<p>共享(Sharing) </p>
<p>虚拟(Virtual) </p>
<p>异步(Asynchronism)</p>
<p>四项重要特征为OS的核心特征，也是我们进一步做得更好的核心挑战所在。</p>
<h2 id="OS-Functions"><a href="#OS-Functions" class="headerlink" title="OS Functions"></a>OS Functions</h2><ol>
<li>CPU管理<ol>
<li>进程/线程控制和管理</li>
<li>进程同步和互斥（mutual exclusion）</li>
<li>进程通信和死锁（dead lock）</li>
<li>处理器调度，作业调度和进程调度</li>
</ol>
</li>
<li>存储管理<ol>
<li>存储分配</li>
<li>存储共享</li>
<li>存储保护</li>
<li>地址转换</li>
<li>存储扩充</li>
</ol>
</li>
<li>⽂件管理<ol>
<li>⽬录管理</li>
<li>存取控制/保护</li>
<li>逻辑组织</li>
<li>物理组织</li>
<li>⽂件存储空间管理</li>
</ol>
</li>
<li>设备管理<ol>
<li>设备分配</li>
<li>设备驱动</li>
<li>缓冲管理</li>
</ol>
</li>
<li>⽤户接口<ol>
<li>命令接口</li>
<li>程序接口</li>
<li>图形接口</li>
</ol>
</li>
<li>⽹络与通信管理</li>
</ol>
<h1 id="OS-Structure"><a href="#OS-Structure" class="headerlink" title="OS Structure"></a>OS Structure</h1><blockquote>
<p>System calls provide an interface to the services made available by an operating system.</p>
</blockquote>
<p>Categories of System call:</p>
<p>• Process control<br>• File management<br>• Device management<br>• Information maintenance<br>• Communications</p>
<h2 id="Simple-Structure"><a href="#Simple-Structure" class="headerlink" title="Simple Structure"></a>Simple Structure</h2><h3 id="MS-DOS"><a href="#MS-DOS" class="headerlink" title="MS-DOS"></a>MS-DOS</h3><p>MS-DOS – written to provide the most functionality in the least space</p>
<ul>
<li>Not divided into modules</li>
<li>Interfaces and levels of functionality not well separated</li>
</ul>
<img src="DOS.png" srcset="/img/loading.gif" lazyload width="80%" height="80%">

<h3 id="Unix"><a href="#Unix" class="headerlink" title="Unix"></a>Unix</h3><p>Limited by hardware functionality</p>
<p>Original UNIX operating system consists of two separable parts:</p>
<ul>
<li>Systems programs</li>
<li>The kernel<ul>
<li>Consists of everything below the system-call interface and above the physical hardware</li>
<li>Provides the file system, CPU scheduling, memory management, and other operating-system functions;</li>
<li>Many interacting functions for one level</li>
</ul>
</li>
</ul>
<img src="Unix.png" srcset="/img/loading.gif" lazyload width="80%" height="80%">

<h2 id="Layered-Structure"><a href="#Layered-Structure" class="headerlink" title="Layered Structure"></a>Layered Structure</h2><p> Operating system is divided many layers (levels)</p>
<ul>
<li>Each built on top of lower layers</li>
<li>Bottom layer (layer 0) is hardware</li>
<li>Highest layer (layer N) is the user interface</li>
</ul>
<p>模块化，易于调试</p>
<h2 id="Microkernel-System-Structure"><a href="#Microkernel-System-Structure" class="headerlink" title="Microkernel System Structure"></a>Microkernel System Structure</h2><blockquote>
<p> Moves as much from the kernel into “user” space as possible.</p>
</blockquote>
<p>非基本的方法从内核中抽离，留下基本的方法。<em>（基本：一般认为内存管理和通信功能是必须的基本方法）</em></p>
<p>Benefits:<br>• Easier to extend a microkernel<br>• Easier to port the operating system to new architectures<br>• More reliable (less code is running in kernel mode)<br>• More secure<br>Detriments:<br>• Performance overhead of user space to kernel space communication</p>
<h2 id="Module-based"><a href="#Module-based" class="headerlink" title="Module based"></a>Module based</h2><p>Most modern operating systems implement kernel<br>modules<br>• Uses object-oriented approach<br>• Each core component is separate<br>• Each talks to the others over known interfaces<br>• Each is loadable as needed within the kernel</p>
<p>类似于layered structure，但是灵活性大大增长</p>
<p>Example:</p>
<img src="Queueing-diagram.png" srcset="/img/loading.gif" lazyload width="80%" height="80%">

<ol>
<li>Scheduling classes</li>
<li>File systems</li>
<li>Loadable system calls</li>
<li>Executable formats</li>
<li>STREAMS modules</li>
<li>Miscellaneous</li>
<li>Device and bus drivers</li>
</ol>
<h2 id="Hybrid-Systems"><a href="#Hybrid-Systems" class="headerlink" title="Hybrid Systems"></a>Hybrid Systems</h2><p>更为现代的设计方式都是采用混合模型</p>
<h1 id="Virtual-Machines"><a href="#Virtual-Machines" class="headerlink" title="Virtual Machines"></a>Virtual Machines</h1><p>分层方法逻辑可延伸为虚拟机概念。虚拟机的基本思想是<u>单个计算机(CPU 、内存、磁盘、网卡等)的硬件<strong>抽象</strong>为几个不同的执行部件</u>，从而造成一种”幻觉”，仿佛每个独立的执行环境都在自己的计算机上运行一样。</p>
<p>创建虚拟机有几个原因，最根本的是，在并行运行几个不同的执行环境(即不同的操作系统)时能够共享相同的硬件。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>底层机器有两种模式:用户模式和内核模式。虚拟机软件可以运行在内核模式，因为它就是操作系统。虚拟机<u>本身只能运行在用户模式</u>。正如物理机器有两种模式一样，虚拟机也有两种模式。因此，<strong>必须有虚拟用户模式和虚拟内核模式</strong>，这<strong>两种模式都运行在物理用户模式</strong>。</p>
<h2 id="优劣"><a href="#优劣" class="headerlink" title="优劣"></a>优劣</h2><p>• Isolation from all other virtual machines. 保证安全<br>• No disruption on normal system operation. 开发测试操作系统不需要中断正常操作系统的服务<br>• Difficult to implement due to the effort required to provide an exact duplicate to the underlying machine</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="Vmware"><a href="#Vmware" class="headerlink" title="Vmware"></a>Vmware</h3><p>虚拟层是VMware 的核心，因为它将物理硬件抽象为独立的作为客户操作系统的虚拟机运行。每个虚拟机都有它自己的虚拟 CPU、内存、磁盘驱动、网络接口等。</p>
<h3 id="Java-虚拟机-JVM"><a href="#Java-虚拟机-JVM" class="headerlink" title="Java 虚拟机 (JVM)"></a>Java 虚拟机 (JVM)</h3><p>Java 对象用类结构来描述; Java 程序由一个或多个类组成。对于每个 Java 类， Java编译器会生成<strong>与平台无关的字节码 (bytecode) 输出文件( .class )</strong> ，它可运行在任何JVM 上。</p>
<p>JVM包括类加载器和执行与平台无关的字节码的Java解释器。JVM 通过执行垃圾收集(garbage collection ，回收不再使用的内存并返回给系统)来自动管理内存。</p>
<h3 id="NET"><a href="#NET" class="headerlink" title=".NET"></a>.NET</h3><p>.NET框架是一套包含了类库集舍、执行环境和软件开发平台的技术。这个平台允许基于.NET框架编程而不是针对任何特定平台。</p>
<p>.NET 框架的核心是公共语言运行时间 (CLR)</p>
<p> CLR 是 .NET 虚拟机的实现</p>
<p>用 C#或者 VB.NET 编写的程序被编译为一种平台无关的中间语言(叫做微软中间语言 MS-IU 。这些被编译好的文件叫做组合 (assembly) ,它包含了 MS-IL 指令和元数据。它们的文件名后缀是.dll 或者.exeo 当要运行这些程序的时候， CLR 把这些组合加载进应用程序域 (Application Domain) 。</p>
<h1 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h1><h2 id="进程概念"><a href="#进程概念" class="headerlink" title="进程概念"></a>进程概念</h2><p>进程不只是程序代码，程序代码有时称为<strong>文本段(或代码段)**。进程还包括</strong>当前活动<strong>，通过程序计数器的值和处理器寄存器的内容来表示。另外，进程通常还包括进程</strong>堆栈段**(包括临时数据，如函数参数、返回地址和局部变量)和<strong>数据段</strong>(包括全局变量)。进程还可能包括堆 (heap) ，是在进程运行期间动态分配的内存。</p>
<p>英文解释更为简单：</p>
<p><strong>A process is a program in execution</strong></p>
<p>进程在执行时产生许多进程是很常见的。</p>
<blockquote>
<p>程序与进程之间的区别:</p>
<ul>
<li>“进程”是一个动态的概念:进程强调的是程序的一次“执行”过程,程序是一组有序指令的集合,在多道程序设计环境下,它不涉及“执行”,因此,是一个静态的概念;</li>
<li>不同的进程可以执行同一个程序:即使多个进程执行同一个程序,只要它们运行在不同的数据集合上,它们就是不同的进程;</li>
<li>每一个进程都有自己的生命期:当系统要完成某一项工作时,它就“创建”一个进程,程序执行完毕,系统就“撤销”这个进程,收回它所占用的资源。</li>
</ul>
</blockquote>
<h3 id="进程状态"><a href="#进程状态" class="headerlink" title="进程状态"></a>进程状态</h3><p>进程在执行时会改变状态。进程状态在某种程度上是由当前活动所定义的。每个进程可能处于下列状态之一:</p>
<ul>
<li>新的:进程正在被创建。</li>
<li>运行:指令正在被执行。</li>
<li>等待:进程等待某个事件的发生(如 IO 完成或收到信号)。</li>
<li>就绪:进程等待分配处理器。</li>
<li>终止:进程完成执行。</li>
</ul>
<img src="process.png" srcset="/img/loading.gif" lazyload width="80%" height="80%">

<h3 id="进程控制块"><a href="#进程控制块" class="headerlink" title="进程控制块"></a>进程控制块</h3><p>每个进程在操作系统内用<strong>进程控制块</strong> (process control block. PCB. 也称为任务控制块)来表示。</p>
<img src="PCB.png" srcset="/img/loading.gif" lazyload width="30%" height="30%">

<ul>
<li>**进程状态:**状态可包括新的、就绪、运行、等待、停止等。</li>
<li>**程序计数器:**计数器表示进程要执行的下个指令的地址。</li>
<li>**CPU 寄存器:**根据计算机体系结构的不同，寄存器的数量和类型也不同。它们包括累加器、索引寄存器、堆战指针、通用寄存器和其他条件码信息寄存器。与程序计数器一起，这些状态信息在出现中断时也需要保存，以便进程以后能正确地继续执行。</li>
<li>**CPU 调度信息:**这类信息包括进程优先级、调度队列的指针和其他调度参数</li>
<li>**内存管理信息:**根据操作系统所使用的内存系统，这类信息包括基址和界限寄存器的值、页表或段表(见第 8 章)。</li>
<li>**记账信息:**这类信息包括 CPU 时间、实际使用时间、时间界限、记账数据、作业或进程数量等。</li>
<li>**I/O 状态信息:**这类信息包括分配给进程的 νo 设备列表、打开的文件列表等。<br>简而言之， PCB 简单地作为这些信息的仓库，这些信息在进程与进程之间是不同的。</li>
</ul>
<img src="PCB_Switch.png" srcset="/img/loading.gif" lazyload width="80%" height="80%">

<h3 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h3><p>一个进程是一个只能进行单个执行线程的程序。</p>
<h2 id="进程调度"><a href="#进程调度" class="headerlink" title="进程调度"></a>进程调度</h2><h3 id="调度队列"><a href="#调度队列" class="headerlink" title="调度队列"></a>调度队列</h3><p>进程进入系统时，会被加到作业队列中，该队列包括系统中的所有进程。</p>
<p>讨论进程调度的常用表示方法是<strong>队列图</strong></p>
<p>每个长方形表示一个队列。有两种队列:就绪队列和一组设备队列。圆形表示为队列服务的资源，箭头表示系统内进程的流向。</p>
<img src="Queueing-diagram.png" srcset="/img/loading.gif" lazyload width="80%" height="80%">

<h2 id="进程创建"><a href="#进程创建" class="headerlink" title="进程创建"></a>进程创建</h2><p>当进程创建新进程时，有两种执行可能:</p>
<ul>
<li>父进程与子进程并发执行。</li>
<li>父进程等待，直到某个或全部子进程执行完。</li>
</ul>
<p>新进程的地址空间也有两种可能:</p>
<ul>
<li>子进程是父进程的复制品(具有与父进程相同的程序和数据)。</li>
<li>子进程装入另一个新程序。</li>
</ul>
<p>Unix通过pid变量标记进程，fork（）函数创建进程。</p>
<p><strong>fork的时候发生什么？</strong><br>=》执行到这一句的时候，一个进程被创建了，这个进程与父进程一样，拥有一套与父进程相同的变量，相同的一套代码，这里可以粗浅的理解为子进程又复制了一份main函数。这里返回一个子进程的进程号，大于0。（第一次fork）</p>
<p>通常，在系统调用<code>fork()</code>之后，一个进程会使用系统调用<code>exec()</code>，以用新程序来取代进<br>程的内存雪间。系统调用<code>exec()</code>将二进制文件装入内存(消除了原来包含系统调用<code>exec()</code>的<br>程序的内存映射)，并开始执行。采用这种方式，两个进程能相互通信，并能按各自的方法<br>执行。父进程能创建更多的子进程，或者如果在子进程运行时没有什么可做，那么它采用<br>系统调用<code>wait()</code>把自己移出就绪队列来等待子进程的终止。</p>
<p><strong>子进程怎么执行：</strong></p>
<p>=》<strong>子进程从fork()的位置开始执行</strong>，也就是说前面的代码不走，但是拥有之前的变量以及变量的值，与父进程的值一样，这次fork()，返回值是0，所以在子进程里面直接执行了pid==0这一个分支，父进程里面并不执行这个分支的语句。这就为我们在写mian函数的时候怎么写子进程的程序提供了一个方法来隔离代码。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">pid_t</span> pid[<span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>    pid[<span class="hljs-number">0</span>] = fork();<br>    pid[<span class="hljs-number">1</span>] = fork();<br>    pid[<span class="hljs-number">2</span>] = fork();<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;this is process\n&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行会输出8次<code>this is a process</code></p>
<h2 id="进程结束"><a href="#进程结束" class="headerlink" title="进程结束"></a>进程结束</h2><p>当进程完成执行最后的语句并使用系统调用<code>exit()</code>请求操作系统删除自身时，进程终止。这时，进程可以返回状态值(通常为整数)到父进程(通过系统调用<code>wait()</code>) 。所有进程资源(包括物理和虚拟内存、打开文件和 I/O 缓冲)会被操作系统释放。</p>
<p>有些系统，包括 VMS ，不允许子进程在父进程己终止的情况下存在。对于这类系统，如果一个进程终止(正常或不正常)，那么它的所有子进程也将终止。这种现象，称为<strong>级联终止</strong>( cascading termination) ，通常由操作系统进行。</p>
<h2 id="调度程序"><a href="#调度程序" class="headerlink" title="调度程序"></a>调度程序</h2><p>进程调度算法的原则:</p>
<ul>
<li>(1)公平性。</li>
<li>(2)资源利用率(特别是CPU利用率)。</li>
<li>(3)响应时间 - 交互式系统情况。</li>
<li>(4)系统吞吐量 - 批处理系统。</li>
<li>(5)周转时间 – 从进程提交到进程完成的时间间隔。</li>
<li>(6)等待时间 – 在就绪队列中等待所花费的时间之和</li>
</ul>
<p>通常对于批处理系统，进程更多地是被提交，而不是马上执行。这些进程被放到大容量存储设备(通常为磁盘)的缓冲地中，保存在那里以便以后执行。<strong>长期调度程序(long-term scheduler)</strong> 或<strong>作业调度程序 (job scheduler)</strong> 从该地中选择进程，并装入内存以准备执行。<strong>短期调度程序 (short-term scheduler)</strong> 或 <strong>CPU 调度程序</strong>从准备执行的进程中选择进程，并为之分配 CPU 。</p>
<p>这两个调度程序的主要差别是它们执行的频率。短期调度程序必须频繁地为CPU 选择新进程。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Knowledge/" class="category-chain-item">Knowledge</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/System/">#System</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Operating System Concept - 1</div>
      <div>https://chivier.github.io/2019/04/10/2021/Operating-System-Concept-1/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Chivier Humber</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>April 10, 2019</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>Licensed under</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2019/04/16/2021/Logic-%E8%B0%93%E8%AF%8D%E6%BC%94%E7%AE%97/" title="Logic-谓词演算-1">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Logic-谓词演算-1</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2019/04/09/2021/Rust-Learning-4/" title="Rust-Learning-4">
                        <span class="hidden-mobile">Rust-Learning-4</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
